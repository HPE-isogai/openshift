Manage OpenShift Container Platform
- Use the command-line interface to manage and configure an OpenShift cluster
- Use the web console to manage and configure an OpenShift cluster
- Create and delete projects
- Import, export, and configure Kubernetes resources
- Examine resources and cluster status
- View logs
- Monitor cluster events and alerts
- Troubleshoot common cluster events and alerts
- Use product documentation
Manage users and policies
- Configure the HTPasswd identity provider for authentication
- Create and delete users
- Modify user passwords
- Modify user and group permissions
- Create and manage groups
Control access to resources
- Define role-based access controls
- Apply permissions to users
- Create and apply secrets to manage sensitive information
- Create service accounts and apply permissions using security context constraints
Configure networking components
- Troubleshoot software defined networking
- Create and edit external routes
- Control cluster network ingress
- Create a self signed certificate
- Secure routes using TLS certificates
Configure pod scheduling
- Limit resource usage
- Scale applications to meet increased demand
- Control pod placement across cluster nodes
Configure cluster scaling
- Manually control the number of cluster workers
- Automatically scale the number of cluster workers


## Authentication - User
oc whoami
oc whoami --show-console
oc whoami --show-server
oc whoami --show-token

- User directed to OAuth server by API or web console
- OAuth token's default lifespan is 24 hours after which user must reauthenticate
- OAuth token
  - Active OAuth tokens retrieved via `oc get oauthaccesstokens`  
- commandline authentication
  - `oc login -u USER -p PASSWORD API_URL
  - KUBECONFIG, --config, or ~/.kube/config
  - `oc login --token=TOKEN API_URL`  
- debugging
  - `oc login --loglevel=9 -u USER -p PASSWORD API_URL`  
- Authentication Configuration
  - `cluster-authentication-operator`  
- Supported Identity Providers
  - HTPassword, LDAP, Basic Authentication, GitHub, GitLab, Google, Keystone, OpenID Connect, Request Header
  - HTPassword
  - LDAP
- Troubleshooting OAuth Pod
```
oc get pods -n openshift-authentication
oc logs -n <pod name>
```
- Troubleshooting Authentication operator
```
oc get all -n openshift-authentication-operator
oc get los -n openshift-authentication-operator deployment.apps/authentication-operator
```
- Troubleshooting User and Identity resources
```
oc get users
oc get identities
```
https://docs.openshift.com/container-platform/4.2/authentication/identity_providers/configuring-htpasswd-identity-provider.html

- Tips/Misc
  - different URL between GUI and CLI
  
## Authentication - Group
- create group
```
[newgen@bastion01 htpasswd]$ oc --user=admin adm groups new local-admin
group.user.openshift.io/local-admin created
[newgen@bastion01 htpasswd]$
[newgen@bastion01 htpasswd]$ oc --user=admin adm groups add-users local-admin alice
group.user.openshift.io/local-admin added: "alice"
[newgen@bastion01 htpasswd]$ oc --user=admin get groups
NAME          USERS
local-admin   alice
```
- LADP Sync
```
kind: "LDAPSyncConfig"
apiVersion: "v1"
url: "ldap://ipa.shared.example.opentlc.com"
insecure: false
bindDN: "uid=admin,cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com"
bindPassword: "r3dh4t1!"
ca: "ipa-ca.crt"
rfc2307:
  groupsQuery:
    baseDN: "cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com"
    derefAliases: "never"
    filter: "(objectClass=groupofnames)"
  groupUIDAttribute: "dn"
  groupNameAttributes: ["cn"]
  groupMembershipAttributes: ["member"]
  usersQuery:
    baseDN: "cn=users,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com"
    derefAliases: "never"
  userNameAttributes: ["uid"]
  userUIDAttribute: "dn"
```
  - whitelist
```
cn=ocp-users,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com
cn=portalapp,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com
cn=paymentapp,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com
cn=ocp-production,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com
cn=ocp-platform,cn=groups,cn=accounts,dc=shared,dc=example,dc=opentlc,dc=com
```
  - apply
```
$ oc --user=admin adm groups sync \
    --sync-config=groupsync.yaml \
    --whitelist=whitelist.txt
```
  - LDAP Group sync Cron Job
  https://github.com/redhat-cop/openshift-management/tree/master/jobs#ldap-group-synchronization
  


  



